{% extends "base.html" %}

{% block content %}
<h1>User: {{ user.username }}</h1>

<img src="{{ user.avatar(128) }}">

{% if user.about_me %}
<p>{{ user.about_me }}</p>
{% endif %}

<p>{{ user.followers_count() }} followers,
    {{ user.following_count() }} following</p>
    
    {% if user == current_user %}
    <a href="{{ url_for('edit_profile') }}">Edit profile</a>
    
    {% elif not current_user.is_following(user) %}
    <form action="{{ url_for('follow', username=user.username) }}" method="post">
        {{ form.hidden_tag() }}
        {{ form.submit(value='Follow') }}
    </form>
    
    {% else %}
    <form action="{{ url_for('unfollow', username=user.username) }}" method="post">
        {{ form.hidden_tag() }}
        {{ form.submit(value='Unfollow') }}
    </form>
    {% endif %}
    
{% if user == current_user %}
<a href="{{ url_for('edit_profile') }}">Edit Profile</a>
{% endif %}

<hr>

{% for post in posts %}
{% include "_post.html" %}
{% endfor %}

{% endblock %}
